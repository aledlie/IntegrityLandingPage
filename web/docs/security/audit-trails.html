<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audit Trail Implementation Guide | Integrity Studio</title>
    <meta name="description" content="Step-by-step guide to implementing audit trails for AI systems. Learn how to set up hash-chained logs, comply with EU AI Act Article 12, and generate audit-ready compliance reports.">
    <link rel="canonical" href="https://www.integritystudio.ai/docs/security/audit-trails">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <!-- HowToArticle Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "HowTo",
        "name": "How to Implement Audit Trails for AI Systems",
        "description": "A comprehensive guide to implementing compliant audit trails for AI systems using OpenTelemetry, including EU AI Act Article 12 requirements, hash-chained logging, and PII protection.",
        "totalTime": "PT2H",
        "estimatedCost": {
            "@type": "MonetaryAmount",
            "currency": "USD",
            "value": "0"
        },
        "tool": [
            {
                "@type": "HowToTool",
                "name": "OpenTelemetry SDK"
            },
            {
                "@type": "HowToTool",
                "name": "SigNoz or compatible OTLP backend"
            }
        ],
        "step": [
            {
                "@type": "HowToStep",
                "position": 1,
                "name": "Configure OpenTelemetry",
                "text": "Set up the OpenTelemetry SDK with dual export to real-time dashboards and long-term archive storage.",
                "url": "https://www.integritystudio.ai/docs/security/audit-trails#step-1"
            },
            {
                "@type": "HowToStep",
                "position": 2,
                "name": "Implement Hash-Chained Logging",
                "text": "Enable SHA-256 hash linking to create tamper-evident audit logs that satisfy compliance requirements.",
                "url": "https://www.integritystudio.ai/docs/security/audit-trails#step-2"
            },
            {
                "@type": "HowToStep",
                "position": 3,
                "name": "Add Article 12 Attributes",
                "text": "Include required EU AI Act attributes on all AI operation spans: operator ID, database versions, input/output metadata.",
                "url": "https://www.integritystudio.ai/docs/security/audit-trails#step-3"
            },
            {
                "@type": "HowToStep",
                "position": 4,
                "name": "Configure PII Redaction",
                "text": "Enable automatic PII redaction to protect personal data while maintaining audit completeness.",
                "url": "https://www.integritystudio.ai/docs/security/audit-trails#step-4"
            },
            {
                "@type": "HowToStep",
                "position": 5,
                "name": "Set Up Retention Policies",
                "text": "Configure 7+ year retention with tiered storage for cost-effective long-term compliance.",
                "url": "https://www.integritystudio.ai/docs/security/audit-trails#step-5"
            },
            {
                "@type": "HowToStep",
                "position": 6,
                "name": "Generate Audit Reports",
                "text": "Query trace data and generate compliance reports for auditors and regulators.",
                "url": "https://www.integritystudio.ai/docs/security/audit-trails#step-6"
            }
        ]
    }
    </script>

    <style>
        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #111118;
            --bg-tertiary: #1a1a24;
            --bg-card: #16161f;
            --border-color: #2a2a3a;
            --text-primary: #f5f5f7;
            --text-secondary: #a1a1aa;
            --text-muted: #71717a;
            --accent-blue: #3b82f6;
            --accent-blue-light: #60a5fa;
            --accent-purple: #8b5cf6;
            --accent-green: #22c55e;
            --accent-yellow: #eab308;
            --accent-red: #ef4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.7;
            font-size: 16px;
        }

        /* Navigation */
        .nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(10, 10, 15, 0.95);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border-color);
            z-index: 100;
            padding: 0 2rem;
        }

        .nav-inner {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 64px;
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 600;
            font-size: 1.1rem;
        }

        .nav-brand svg {
            width: 28px;
            height: 28px;
            color: var(--accent-blue);
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.2s;
        }

        .nav-links a:hover {
            color: var(--text-primary);
        }

        /* Layout */
        .layout {
            display: flex;
            margin-top: 64px;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 64px;
            left: 0;
            width: 280px;
            height: calc(100vh - 64px);
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            overflow-y: auto;
            padding: 1.5rem 0;
        }

        .sidebar-section {
            padding: 0 1.5rem;
            margin-bottom: 1.5rem;
        }

        .sidebar-title {
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            margin-bottom: 0.75rem;
        }

        .sidebar-nav {
            list-style: none;
        }

        .sidebar-nav li {
            margin-bottom: 0.25rem;
        }

        .sidebar-nav a {
            display: block;
            padding: 0.5rem 0.75rem;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.875rem;
            border-radius: 6px;
            transition: all 0.2s;
        }

        .sidebar-nav a:hover,
        .sidebar-nav a.active {
            color: var(--text-primary);
            background: var(--bg-tertiary);
        }

        .sidebar-nav a.active {
            border-left: 2px solid var(--accent-blue);
            padding-left: calc(0.75rem - 2px);
        }

        /* Main Content */
        .main {
            margin-left: 280px;
            flex: 1;
            min-height: calc(100vh - 64px);
        }

        .content {
            max-width: 900px;
            margin: 0 auto;
            padding: 3rem 2rem 6rem;
        }

        /* Hero */
        .hero {
            text-align: center;
            padding: 4rem 2rem;
            background: linear-gradient(180deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 3rem;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(59, 130, 246, 0.15));
            border: 1px solid rgba(34, 197, 94, 0.3);
            padding: 0.5rem 1rem;
            border-radius: 100px;
            font-size: 0.85rem;
            color: var(--accent-green);
            margin-bottom: 1.5rem;
        }

        .hero h1 {
            font-size: 2.75rem;
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--text-primary), var(--text-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            font-size: 1.2rem;
            color: var(--text-secondary);
            max-width: 700px;
            margin: 0 auto 2rem;
        }

        /* Typography */
        h2 {
            font-size: 1.75rem;
            font-weight: 600;
            margin: 3rem 0 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }

        h2:first-of-type {
            margin-top: 0;
            border-top: none;
            padding-top: 0;
        }

        h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 2rem 0 0.75rem;
            color: var(--text-primary);
        }

        h4 {
            font-size: 1rem;
            font-weight: 600;
            margin: 1.5rem 0 0.5rem;
            color: var(--text-secondary);
        }

        p {
            margin-bottom: 1rem;
            color: var(--text-secondary);
        }

        strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        /* Lists */
        ul, ol {
            margin: 0 0 1rem 1.5rem;
            color: var(--text-secondary);
        }

        li {
            margin-bottom: 0.5rem;
        }

        /* Code */
        code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875em;
            background: var(--bg-tertiary);
            padding: 0.2em 0.4em;
            border-radius: 4px;
            color: var(--accent-blue-light);
        }

        pre {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.25rem;
            overflow-x: auto;
            margin: 1rem 0 1.5rem;
        }

        pre code {
            background: none;
            padding: 0;
            font-size: 0.85rem;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        /* Tables */
        .table-wrapper {
            overflow-x: auto;
            margin: 1rem 0 1.5rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        th, td {
            text-align: left;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        th {
            background: var(--bg-tertiary);
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        td {
            color: var(--text-secondary);
        }

        tr:hover td {
            background: rgba(59, 130, 246, 0.05);
        }

        /* Callouts */
        .callout {
            border-radius: 8px;
            padding: 1rem 1.25rem;
            margin: 1.5rem 0;
            border-left: 3px solid;
        }

        .callout-info {
            background: rgba(59, 130, 246, 0.1);
            border-color: var(--accent-blue);
        }

        .callout-success {
            background: rgba(34, 197, 94, 0.1);
            border-color: var(--accent-green);
        }

        .callout-warning {
            background: rgba(234, 179, 8, 0.1);
            border-color: var(--accent-yellow);
        }

        .callout-danger {
            background: rgba(239, 68, 68, 0.1);
            border-color: var(--accent-red);
        }

        .callout-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .callout p:last-child {
            margin-bottom: 0;
        }

        /* Step Cards */
        .step-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .step-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .step-number {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .step-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Cards Grid */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            transition: border-color 0.2s, transform 0.2s;
        }

        .card:hover {
            border-color: var(--accent-blue);
            transform: translateY(-2px);
        }

        .card-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(139, 92, 246, 0.2));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .card h4 {
            margin: 0 0 0.5rem;
            color: var(--text-primary);
        }

        .card p {
            font-size: 0.9rem;
            margin: 0;
        }

        /* Architecture Diagram */
        .architecture {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            margin: 1.5rem 0;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.4;
            overflow-x: auto;
            white-space: pre;
            color: var(--text-secondary);
        }

        /* Section Anchor */
        .section-anchor {
            scroll-margin-top: 80px;
        }

        /* Links */
        a {
            color: var(--accent-blue-light);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                display: none;
            }
            .main {
                margin-left: 0;
            }
        }

        @media (max-width: 640px) {
            .hero h1 {
                font-size: 2rem;
            }
            .hero p {
                font-size: 1rem;
            }
            .content {
                padding: 2rem 1rem;
            }
            .card-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-inner">
            <a href="/" class="nav-brand">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                </svg>
                Integrity Studio
            </a>
            <div class="nav-links">
                <a href="/">Home</a>
                <a href="/docs">Docs</a>
                <a href="/blog">Blog</a>
                <a href="/about">About</a>
            </div>
        </div>
    </nav>

    <div class="layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-section">
                <div class="sidebar-title">Audit Trail Guide</div>
                <ul class="sidebar-nav">
                    <li><a href="#overview" class="active">Overview</a></li>
                    <li><a href="#what-gets-tracked">What Gets Tracked</a></li>
                    <li><a href="#storage-locations">Storage Locations</a></li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Implementation Steps</div>
                <ul class="sidebar-nav">
                    <li><a href="#step-1">1. Configure OpenTelemetry</a></li>
                    <li><a href="#step-2">2. Hash-Chained Logging</a></li>
                    <li><a href="#step-3">3. Article 12 Attributes</a></li>
                    <li><a href="#step-4">4. PII Redaction</a></li>
                    <li><a href="#step-5">5. Retention Policies</a></li>
                    <li><a href="#step-6">6. Generate Reports</a></li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Reference</div>
                <ul class="sidebar-nav">
                    <li><a href="#querying-traces">Querying Traces</a></li>
                    <li><a href="#dashboards">Dashboards</a></li>
                    <li><a href="#related">Related Docs</a></li>
                </ul>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main">
            <!-- Hero -->
            <div class="hero">
                <div class="hero-badge">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 12l2 2 4-4"/>
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    </svg>
                    EU AI Act Article 12 Compliant
                </div>
                <h1>Audit Trail Implementation</h1>
                <p>Step-by-step guide to implementing tamper-evident audit trails for AI systems with hash-chained logging, compliance reporting, and 7-year retention.</p>
            </div>

            <div class="content">
                <!-- Overview -->
                <section id="overview" class="section-anchor">
                    <h2>Overview</h2>
                    <p>Audit trails provide the foundation for AI compliance, enabling organizations to demonstrate accountability, investigate incidents, and satisfy regulatory requirements like <strong>EU AI Act Article 12</strong>.</p>

                    <p>This guide covers implementing production-grade audit trails using OpenTelemetry with these capabilities:</p>

                    <div class="card-grid">
                        <div class="card">
                            <div class="card-icon">&#128279;</div>
                            <h4>Hash-Chained Logs</h4>
                            <p>SHA-256 linking creates tamper-evident records that auditors can cryptographically verify.</p>
                        </div>
                        <div class="card">
                            <div class="card-icon">&#128202;</div>
                            <h4>Trace Correlation</h4>
                            <p>Every operation has a trace ID linking related events across distributed systems.</p>
                        </div>
                        <div class="card">
                            <div class="card-icon">&#128274;</div>
                            <h4>PII Redaction</h4>
                            <p>Automatic masking of emails, API keys, SSNs, and credit cards while maintaining audit completeness.</p>
                        </div>
                        <div class="card">
                            <div class="card-icon">&#128451;</div>
                            <h4>7-Year Retention</h4>
                            <p>Immutable, exportable, compliance-ready storage with tiered archival for cost efficiency.</p>
                        </div>
                    </div>

                    <div class="callout callout-info">
                        <div class="callout-title">Integrity Studio Advantage</div>
                        <p>Beyond standard logging, Integrity Studio provides built-in EU AI Act Article 12 compliance logging, automated risk documentation, and audit-ready compliance reports.</p>
                    </div>
                </section>

                <!-- What Gets Tracked -->
                <section id="what-gets-tracked" class="section-anchor">
                    <h2>What Gets Tracked</h2>

                    <h3>Session Activity</h3>
                    <ul>
                        <li>Session start/stop events with timestamps</li>
                        <li>User prompts and tool invocations</li>
                        <li>Branch, project, and repository context</li>
                    </ul>

                    <h3>Tool Usage</h3>
                    <ul>
                        <li>Every tool call (MCP servers, built-in tools, agents, plugins)</li>
                        <li>Input parameters and output summaries</li>
                        <li>Duration and success/failure status</li>
                    </ul>

                    <h3>LLM Interactions</h3>
                    <ul>
                        <li>Model used, tokens consumed, costs</li>
                        <li>Prompts and completions (with PII auto-redacted)</li>
                        <li>Streaming response metrics (time-to-first-token)</li>
                    </ul>

                    <h3>Build & Type Checks</h3>
                    <ul>
                        <li>TypeScript/Python error counts</li>
                        <li>Check durations by repository</li>
                    </ul>
                </section>

                <!-- Storage Locations -->
                <section id="storage-locations" class="section-anchor">
                    <h2>Storage Locations</h2>

                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th>Location</th>
                                    <th>Contents</th>
                                    <th>Retention</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>~/.claude/telemetry/traces-*.jsonl</code></td>
                                    <td>All operation spans (local backup)</td>
                                    <td>Configurable</td>
                                </tr>
                                <tr>
                                    <td><code>~/.claude/telemetry/logs-*.jsonl</code></td>
                                    <td>Structured logs with trace IDs</td>
                                    <td>Configurable</td>
                                </tr>
                                <tr>
                                    <td><code>~/.claude/telemetry/llm-events-*.jsonl</code></td>
                                    <td>LLM call details (model, tokens, cost)</td>
                                    <td>Configurable</td>
                                </tr>
                                <tr>
                                    <td>SigNoz Cloud</td>
                                    <td>Remote dashboard with 8 pre-built views</td>
                                    <td>7+ years</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="architecture">Dual Export Architecture
=======================

AI Application
      |
      v
+------------------+
| OpenTelemetry    |
| SDK              |
+------------------+
      |
      +---> Local File Export
      |       (JSONL backup)
      |       ~/.claude/telemetry/
      |
      +---> Remote OTLP Export
              (SigNoz Cloud)
              TLS + Auth
              7-year retention</div>
                </section>

                <!-- Step 1: Configure OpenTelemetry -->
                <section id="step-1" class="section-anchor">
                    <h2>Step 1: Configure OpenTelemetry</h2>

                    <div class="step-card">
                        <div class="step-header">
                            <div class="step-number">1</div>
                            <div class="step-title">Set up environment variables for dual export</div>
                        </div>

                        <pre><code># Enable all telemetry signals
export OTEL_ENABLED="true"

# Configure OTLP export
export OTEL_EXPORTER_OTLP_ENDPOINT="https://ingest.us.signoz.cloud"
export OTEL_EXPORTER_OTLP_PROTOCOL="http/protobuf"
export OTEL_EXPORTER_OTLP_COMPRESSION="gzip"

# Service identification for audit
export OTEL_SERVICE_NAME="ai-inference-service"
export OTEL_RESOURCE_ATTRIBUTES="deployment.environment=production,ai.act.compliance=enabled"

# Authentication
export SIGNOZ_INGESTION_KEY="your-key-here"

# Local backup
export CLAUDE_TELEMETRY_DIR="$HOME/.claude/telemetry"</code></pre>
                    </div>

                    <h3>Initialize in Your Application</h3>
                    <pre><code>import { initTelemetry, withSpan, logger, shutdown } from './lib/otel';

// Initialize at application startup
initTelemetry();

// Graceful shutdown exports pending telemetry
process.on('SIGTERM', async () => {
  await shutdown();
});</code></pre>
                </section>

                <!-- Step 2: Hash-Chained Logging -->
                <section id="step-2" class="section-anchor">
                    <h2>Step 2: Implement Hash-Chained Logging</h2>

                    <div class="step-card">
                        <div class="step-header">
                            <div class="step-number">2</div>
                            <div class="step-title">Enable SHA-256 hash linking for tamper-evident logs</div>
                        </div>

                        <p>Hash-chained logs link each record to the previous one using cryptographic hashes. If any record is modified, the chain breaks&mdash;providing clear evidence of tampering.</p>

                        <pre><code>import { createHash } from 'crypto';

interface AuditRecord {
  timestamp: string;
  traceId: string;
  event: string;
  attributes: Record&lt;string, unknown&gt;;
  previousHash: string;
  hash: string;
}

let previousHash = '0'.repeat(64); // Genesis hash

function createAuditRecord(event: string, attributes: Record&lt;string, unknown&gt;, traceId: string): AuditRecord {
  const record = {
    timestamp: new Date().toISOString(),
    traceId,
    event,
    attributes,
    previousHash,
    hash: '', // Computed below
  };

  // Compute hash of record (excluding hash field)
  const { hash: _, ...recordWithoutHash } = record;
  record.hash = createHash('sha256')
    .update(JSON.stringify(recordWithoutHash))
    .digest('hex');

  // Update chain
  previousHash = record.hash;

  return record;
}</code></pre>
                    </div>

                    <div class="callout callout-success">
                        <div class="callout-title">Verification</div>
                        <p>Auditors can verify the entire chain by recomputing hashes. Any modification&mdash;even a single character&mdash;will cause all subsequent hashes to differ from their recorded values.</p>
                    </div>
                </section>

                <!-- Step 3: Article 12 Attributes -->
                <section id="step-3" class="section-anchor">
                    <h2>Step 3: Add Article 12 Attributes</h2>

                    <div class="step-card">
                        <div class="step-header">
                            <div class="step-number">3</div>
                            <div class="step-title">Include required EU AI Act attributes on all AI operation spans</div>
                        </div>

                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Requirement</th>
                                        <th>Attribute</th>
                                        <th>Example</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Period of use</td>
                                        <td><code>ai.operation.start_time</code></td>
                                        <td><code>2026-01-28T14:30:00Z</code></td>
                                    </tr>
                                    <tr>
                                        <td>Reference databases</td>
                                        <td><code>ai.database.name</code>, <code>ai.database.version</code></td>
                                        <td><code>embeddings_v2</code>, <code>2024.1.3</code></td>
                                    </tr>
                                    <tr>
                                        <td>Input data</td>
                                        <td><code>ai.input.type</code>, <code>ai.input.tokens</code></td>
                                        <td><code>customer_query</code>, <code>150</code></td>
                                    </tr>
                                    <tr>
                                        <td>Personnel verification</td>
                                        <td><code>ai.verifier.id</code>, <code>ai.verifier.role</code></td>
                                        <td><code>op_12345</code>, <code>human_reviewer</code></td>
                                    </tr>
                                    <tr>
                                        <td>Model information</td>
                                        <td><code>gen_ai.system</code>, <code>gen_ai.request.model</code></td>
                                        <td><code>anthropic</code>, <code>claude-opus-4-5-20251101</code></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <pre><code>// Example: OpenTelemetry span with Article 12 attributes
await withSpan('ai.decision', {
  // Period of use
  'ai.operation.start_time': new Date().toISOString(),

  // Reference databases
  'ai.database.name': 'customer_embeddings_v2',
  'ai.database.version': '2024.1.3',

  // Input data (redacted)
  'ai.input.type': 'customer_query',
  'ai.input.tokens': 150,

  // Personnel verification
  'ai.verifier.id': hashUserId(operatorId), // Always hash PII
  'ai.verifier.role': 'human_reviewer',

  // Model information
  'gen_ai.system': 'anthropic',
  'gen_ai.request.model': 'claude-opus-4-5-20251101',
}, async (span) => {
  // AI operation logic
});</code></pre>
                    </div>
                </section>

                <!-- Step 4: PII Redaction -->
                <section id="step-4" class="section-anchor">
                    <h2>Step 4: Configure PII Redaction</h2>

                    <div class="step-card">
                        <div class="step-header">
                            <div class="step-number">4</div>
                            <div class="step-title">Enable automatic PII redaction to protect personal data</div>
                        </div>

                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Data Type</th>
                                        <th>Pattern</th>
                                        <th>Replacement</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Email addresses</td>
                                        <td><code>[\w.-]+@[\w.-]+</code></td>
                                        <td><code>[EMAIL]</code></td>
                                    </tr>
                                    <tr>
                                        <td>Phone numbers</td>
                                        <td><code>\+?[\d\s-]{10,}</code></td>
                                        <td><code>[PHONE]</code></td>
                                    </tr>
                                    <tr>
                                        <td>Credit cards</td>
                                        <td><code>\d{4}[\s-]?\d{4}[\s-]?\d{4}[\s-]?\d{4}</code></td>
                                        <td><code>[CREDIT_CARD]</code></td>
                                    </tr>
                                    <tr>
                                        <td>SSN</td>
                                        <td><code>\d{3}-\d{2}-\d{4}</code></td>
                                        <td><code>[SSN]</code></td>
                                    </tr>
                                    <tr>
                                        <td>API keys</td>
                                        <td><code>sk-[a-zA-Z0-9]{32,}</code></td>
                                        <td><code>[API_KEY]</code></td>
                                    </tr>
                                    <tr>
                                        <td>JWT tokens</td>
                                        <td><code>eyJ...\\.eyJ...\\....</code></td>
                                        <td><code>[JWT_TOKEN]</code></td>
                                    </tr>
                                    <tr>
                                        <td>AWS keys</td>
                                        <td><code>AKIA[0-9A-Z]{16}</code></td>
                                        <td><code>[AWS_KEY]</code></td>
                                    </tr>
                                    <tr>
                                        <td>Bearer tokens</td>
                                        <td><code>Bearer [a-zA-Z0-9-_.]+</code></td>
                                        <td><code>Bearer [TOKEN]</code></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <pre><code># Enable PII redaction (default: true)
export LANGTRACE_PII_REDACTION="true"</code></pre>

                        <pre><code>import { initLangtrace, createPIIProcessor } from './lib/langtrace';

// Default: PII redaction enabled
initLangtrace();

// Or with custom patterns
initLangtrace({
  contentProcessor: createPIIProcessor([
    { pattern: /\bACME-\d{6}\b/g, replacement: '[ACME_ID]' }
  ])
});</code></pre>
                    </div>

                    <div class="callout callout-warning">
                        <div class="callout-title">User ID Hashing</div>
                        <p>Always hash user identifiers with SHA-256 and a consistent salt before logging. Never log email addresses, names, IP addresses, or session tokens directly.</p>
                    </div>
                </section>

                <!-- Step 5: Retention Policies -->
                <section id="step-5" class="section-anchor">
                    <h2>Step 5: Set Up Retention Policies</h2>

                    <div class="step-card">
                        <div class="step-header">
                            <div class="step-number">5</div>
                            <div class="step-title">Configure 7+ year retention with tiered storage</div>
                        </div>

                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Data Type</th>
                                        <th>Hot (30 days)</th>
                                        <th>Warm (1 year)</th>
                                        <th>Cold (7+ years)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Operational traces</td>
                                        <td>SigNoz Cloud</td>
                                        <td>S3 Standard</td>
                                        <td>S3 Glacier</td>
                                    </tr>
                                    <tr>
                                        <td>Decision audit trails</td>
                                        <td>SigNoz Cloud</td>
                                        <td>S3 Standard-IA</td>
                                        <td>S3 Glacier Deep</td>
                                    </tr>
                                    <tr>
                                        <td>Model versions</td>
                                        <td>&mdash;</td>
                                        <td>&mdash;</td>
                                        <td>Permanent archive</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <pre><code>// S3 lifecycle policy for audit trail archival
{
  "Rules": [
    {
      "ID": "AuditTrailArchival",
      "Status": "Enabled",
      "Transitions": [
        {
          "Days": 30,
          "StorageClass": "STANDARD_IA"
        },
        {
          "Days": 365,
          "StorageClass": "GLACIER"
        }
      ],
      "NoncurrentVersionTransitions": [
        {
          "NoncurrentDays": 30,
          "StorageClass": "GLACIER"
        }
      ]
    }
  ]
}</code></pre>
                    </div>
                </section>

                <!-- Step 6: Generate Reports -->
                <section id="step-6" class="section-anchor">
                    <h2>Step 6: Generate Audit Reports</h2>

                    <div class="step-card">
                        <div class="step-header">
                            <div class="step-number">6</div>
                            <div class="step-title">Query trace data and generate compliance reports</div>
                        </div>

                        <pre><code>// Query traces for audit period
const auditQuery = {
  service: 'ai-inference-service',
  startTime: '2026-01-01T00:00:00Z',
  endTime: '2026-01-31T23:59:59Z',
  attributes: {
    'ai.risk_level': 'high',
  },
};

// Export to compliance report format
const traces = await signoz.queryTraces(auditQuery);
const report = generateComplianceReport(traces, {
  format: 'pdf',
  includeMetrics: true,
  redactPII: true,
});</code></pre>
                    </div>

                    <h3>What Auditors Look For</h3>
                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th>Audit Area</th>
                                    <th>Evidence Required</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>System Functioning</td>
                                    <td>Trace data showing normal operation patterns</td>
                                </tr>
                                <tr>
                                    <td>Risk Identification</td>
                                    <td>Alerts and anomaly detection logs</td>
                                </tr>
                                <tr>
                                    <td>Human Oversight</td>
                                    <td>Verification records with operator IDs</td>
                                </tr>
                                <tr>
                                    <td>Data Processing</td>
                                    <td>Input/output logs (appropriately redacted)</td>
                                </tr>
                                <tr>
                                    <td>Model Versions</td>
                                    <td>Deployment history with version tracking</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Querying Traces -->
                <section id="querying-traces" class="section-anchor">
                    <h2>Querying Traces</h2>

                    <p>Use MCP tools to query audit data directly:</p>

                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th>Tool</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>obs_query_traces</code></td>
                                    <td>Query traces by service, span name, duration, date range, attribute filter</td>
                                </tr>
                                <tr>
                                    <td><code>obs_query_logs</code></td>
                                    <td>Query logs by severity, search text, trace ID</td>
                                </tr>
                                <tr>
                                    <td><code>obs_query_llm_events</code></td>
                                    <td>Query LLM events by model, provider, event name</td>
                                </tr>
                                <tr>
                                    <td><code>obs_get_trace_url</code></td>
                                    <td>Generate SigNoz trace viewer URL</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <pre><code># Example: Query high-risk AI decisions
obs_query_traces \
  --service "ai-inference-service" \
  --start "2026-01-01" \
  --end "2026-01-31" \
  --attributeFilter '{"ai.risk_level": "high"}'</code></pre>
                </section>

                <!-- Dashboards -->
                <section id="dashboards" class="section-anchor">
                    <h2>Available Dashboards</h2>

                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th>Dashboard</th>
                                    <th>Purpose</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Claude Code Hooks Observability</td>
                                    <td>Core hook performance metrics</td>
                                </tr>
                                <tr>
                                    <td>Token Usage & Cost Efficiency</td>
                                    <td>LLM token consumption and costs</td>
                                </tr>
                                <tr>
                                    <td>Error & Anomaly Detection</td>
                                    <td>Error monitoring and anomalies</td>
                                </tr>
                                <tr>
                                    <td>Build & Type Check Performance</td>
                                    <td>TSC/Python type check metrics</td>
                                </tr>
                                <tr>
                                    <td>Subagent Analytics</td>
                                    <td>Agent invocations by type/model</td>
                                </tr>
                                <tr>
                                    <td>Session Health Overview</td>
                                    <td>Session activity by branch/project</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Related -->
                <section id="related" class="section-anchor">
                    <h2>Related Documentation</h2>

                    <ul>
                        <li><a href="/docs/tracing">Distributed Tracing & EU AI Act Compliance</a></li>
                        <li><a href="/resources/whylabs-migration-guide">WhyLabs Migration Guide</a> &mdash; includes compliance feature comparison</li>
                        <li><a href="/resources/eu-ai-act-compliance-checklist">EU AI Act Compliance Checklist</a></li>
                        <li><a href="https://opentelemetry.io/docs/" target="_blank">OpenTelemetry Documentation</a></li>
                        <li><a href="https://signoz.io/docs/" target="_blank">SigNoz Documentation</a></li>
                    </ul>
                </section>

                <!-- Footer -->
                <footer style="margin-top: 4rem; padding-top: 2rem; border-top: 1px solid var(--border-color); text-align: center; color: var(--text-muted); font-size: 0.875rem;">
                    <p>Built with <a href="https://opentelemetry.io">OpenTelemetry</a> and <a href="https://signoz.io">SigNoz</a></p>
                    <p style="margin-top: 0.5rem;">&copy; 2026 Integrity Studio. All rights reserved.</p>
                </footer>
            </div>
        </main>
    </div>

    <script>
        // Sidebar active state on scroll
        const sections = document.querySelectorAll('.section-anchor');
        const navLinks = document.querySelectorAll('.sidebar-nav a');

        const observerOptions = {
            root: null,
            rootMargin: '-20% 0px -80% 0px',
            threshold: 0
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href') === '#' + entry.target.id) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }, observerOptions);

        sections.forEach(section => observer.observe(section));
    </script>
</body>
</html>
